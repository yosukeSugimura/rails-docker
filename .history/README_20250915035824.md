# ğŸš€ Rails Docker Template

[![Ruby](https://img.shields.io/badge/ruby-3.2.5-red.svg)](https://ruby-lang.org)
[![Rails](https://img.shields.io/badge/rails-6.1.7-red.svg)](https://rubyonrails.org)
[![Docker](https://img.shields.io/badge/docker-compose-blue.svg)](https://docker.com)
[![PostgreSQL](https://img.shields.io/badge/postgresql-13-blue.svg)](https://postgresql.org)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)

ãƒ¢ãƒ€ãƒ³ãªRailsã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã®ãŸã‚ã®Dockerç’°å¢ƒãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã™ã€‚é–‹ç™ºã‹ã‚‰ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã¾ã§ä¸€è²«ã—ãŸç’°å¢ƒã‚’æä¾›ã—ã€ãƒãƒ¼ãƒ é–‹ç™ºã‚’åŠ¹ç‡åŒ–ã—ã¾ã™ã€‚

## âœ¨ ç‰¹å¾´

- ğŸ³ **Dockerå®Œå…¨å¯¾å¿œ**: è¤‡é›‘ãªç’°å¢ƒæ§‹ç¯‰ä¸è¦
- âš¡ **é«˜é€Ÿèµ·å‹•**: æœ€é©åŒ–ã•ã‚ŒãŸDockerfile
- ğŸ”§ **é–‹ç™ºãƒ»æœ¬ç•ªå¯¾å¿œ**: ç’°å¢ƒåˆ¥è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
- ğŸ§ª **ãƒ†ã‚¹ãƒˆç’°å¢ƒ**: RSpec + FactoryBotæ§‹æˆ
- ğŸ“Š **ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸**: SimpleCovçµ±åˆ
- ğŸ” **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: ã‚»ã‚­ãƒ¥ã‚¢ãªã‚³ãƒ³ãƒ†ãƒŠè¨­è¨ˆ
- ğŸ“± **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–**: ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œUI

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ |
|----------|------|------------|
| Backend | Ruby on Rails | 6.1.7 |
| Database | PostgreSQL | 13 |
| Background Jobs | Sidekiq | latest |
| Testing | RSpec | latest |
| Container | Docker & Docker Compose | latest |

## ğŸ“‹ å‰ææ¡ä»¶

ä»¥ä¸‹ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š

- [Docker](https://www.docker.com/get-started/) (v20.10+)
- [Docker Compose](https://docs.docker.com/compose/install/) (v2.0+)
- [Git](https://git-scm.com/) (v2.28+)

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³

```bash
git clone https://github.com/yosukeSugimura/rails-docker.git
cd rails-docker
```

### 2. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

```bash
cp .env.example .env
# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦å¿…è¦ãªè¨­å®šã‚’è¡Œã†
```

### 3. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èµ·å‹•

```bash
# é–‹ç™ºç’°å¢ƒã®èµ·å‹•
make dev-up

# ã¾ãŸã¯æ‰‹å‹•ã§èµ·å‹•
docker-compose up --build -d
```

### 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–

```bash
make db-setup

# ã¾ãŸã¯æ‰‹å‹•ã§å®Ÿè¡Œ
docker-compose exec web rails db:create
docker-compose exec web rails db:migrate
docker-compose exec web rails db:seed
```

### 5. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹

ğŸŒ [http://localhost:3000](http://localhost:3000) ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒåˆ©ç”¨ã§ãã¾ã™ã€‚

## ğŸ”§ é–‹ç™ºã‚³ãƒãƒ³ãƒ‰

ä¾¿åˆ©ãªMakefileã‚³ãƒãƒ³ãƒ‰ã‚’ç”¨æ„ã—ã¦ã„ã¾ã™ï¼š

```bash
# é–‹ç™ºç’°å¢ƒ
make dev-up          # é–‹ç™ºç’°å¢ƒèµ·å‹•
make dev-down        # é–‹ç™ºç’°å¢ƒåœæ­¢
make dev-logs        # ãƒ­ã‚°è¡¨ç¤º

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
make db-setup        # DBåˆæœŸåŒ–
make db-migrate      # ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
make db-rollback     # ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å·»ãæˆ»ã—

# ãƒ†ã‚¹ãƒˆ
make test            # ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
make test-coverage   # ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ããƒ†ã‚¹ãƒˆ

# ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹
make clean           # ä¸è¦ãªã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ»ãƒœãƒªãƒ¥ãƒ¼ãƒ å‰Šé™¤
make shell           # ã‚³ãƒ³ãƒ†ãƒŠå†…ã‚·ã‚§ãƒ«èµ·å‹•
```

## ğŸŒ ç’°å¢ƒåˆ¥è¨­å®š

### é–‹ç™ºç’°å¢ƒ

```bash
docker-compose -f docker-compose.yml -f docker-compose.override.yml up -d
```

### ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç’°å¢ƒ

```bash
docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
docker-compose exec web bundle exec rspec

# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ããƒ†ã‚¹ãƒˆå®Ÿè¡Œ
docker-compose exec web bundle exec rspec --require spec_helper

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å®Ÿè¡Œ
docker-compose exec web bundle exec rspec spec/models/user_spec.rb
```

## ğŸ“Š ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸

SimpleCovã‚’ä½¿ç”¨ã—ã¦ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’æ¸¬å®šã§ãã¾ã™ï¼š

```bash
make test-coverage
open coverage/index.html  # macOSã®å ´åˆ
```

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

ã“ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ä»¥ä¸‹ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ï¼š

- érootãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã®ã‚³ãƒ³ãƒ†ãƒŠå®Ÿè¡Œ
- æœ€å°é™ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆé©ç”¨
- æ©Ÿå¯†æƒ…å ±ã®ç’°å¢ƒå¤‰æ•°åŒ–

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤

### Heroku

```bash
# Heroku CLIçµŒç”±ã§ã®ãƒ‡ãƒ—ãƒ­ã‚¤
heroku create your-app-name
heroku container:push web
heroku container:release web
```

### AWS/GCP

Docker imageã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã¾ã™ã€‚

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

1. ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ•ã‚©ãƒ¼ã‚¯
2. ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ (`git checkout -b feature/amazing-feature`)
3. å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ (`git commit -m 'Add amazing feature'`)
4. ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ (`git push origin feature/amazing-feature`)
5. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆ

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯[MIT License](LICENSE)ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ‘¨â€ğŸ’» ä½œè€…

**Yosuke Sugimura**

- GitHub: [@yosukeSugimura](https://github.com/yosukeSugimura)
- Twitter: [@your_twitter](https://twitter.com/your_twitter)

## ğŸ™ è¬è¾

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ä»¥ä¸‹ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«æ”¯ãˆã‚‰ã‚Œã¦ã„ã¾ã™ï¼š

- [Ruby on Rails](https://rubyonrails.org/)
- [PostgreSQL](https://www.postgresql.org/)
- [Docker](https://www.docker.com/)

---

â­ ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒå½¹ã«ç«‹ã£ãŸå ´åˆã¯ã€ãœã²ã‚¹ã‚¿ãƒ¼ã‚’ãŠé¡˜ã„ã—ã¾ã™ï¼
